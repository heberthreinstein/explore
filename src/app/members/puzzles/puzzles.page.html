<ion-header>
	<ion-toolbar color="primary">
		<ion-title>Meus Desafios</ion-title>
		<ion-buttons slot="start">
			<ion-back-button defaultHref="/members"></ion-back-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>

<ion-content>
	<ion-item *ngFor="let item of puzzles | async | keyvalue">
		<ion-grid>
			<ion-row>
				<ion-col size="6">
					<ion-text color="primary">
						<h1>{{ item.value.puzzle[0].puzzle }}</h1>
						<br />
						<ion-label *ngIf="item.completed == true" class="ion-text-end">100%</ion-label>
						<ion-progress-bar value="1"></ion-progress-bar>
					</ion-text>
				</ion-col>
				<div *ngIf="!item.value.completed">
					<div *ngFor="let stage of item.value.puzzle[0].stages">
						<ion-col *ngIf="stage.order == item.value.nextStage" size="6">
							<ion-card position="end">
								<ion-card-header>
									<ion-card-subtitle>{{stage.type}}</ion-card-subtitle>
									<ion-card-title>{{stage.title}}</ion-card-title>
								</ion-card-header>
								<div *ngIf="stage.type == 'Quiz'">
									<ion-button expand="block" shape="round"
										href='members/{{item.value.puzzle[0].puzzle}}/{{stage.type}}/{{stage.title}}'>
										Responder
									</ion-button>
								</div>
								<div *ngIf="stage.type == 'Go To'">
									<ion-button expand="block" shape="round"
										(click)="arrived(item.value.puzzle[0].puzzle)">
										Estou Aqui
									</ion-button>
								</div>
							</ion-card>
						</ion-col>
					</div>
				</div>
				<div *ngIf="item.value.completed">
					<ion-card position="end">
						<ion-card-header>
							<ion-card-subtitle>Completed</ion-card-subtitle>
							<center><ion-card-title>{{item.value.points}} <br>Pontos</ion-card-title></center>
						</ion-card-header>
					</ion-card>
				</div>
			</ion-row>
		</ion-grid>
	</ion-item>
	<br>
	<br>

	<ion-text class="ion-text-center" color="primary">
		<h1>Prot√≥tipos</h1>
	</ion-text>
	<ion-button expand="block" routerLink="/sample-ar-js">Realidade Aumentada</ion-button>

</ion-content>